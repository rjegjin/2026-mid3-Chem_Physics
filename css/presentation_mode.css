/* presentation_mode.css - Borcelle Theme with Enhanced Molecular Models */

body.presentation-mode {
    background-color: var(--bg-secondary);
    overflow: hidden;
}

/* --- Layout Essentials --- */
body.presentation-mode section {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    opacity: 0; visibility: hidden;
    transition: opacity 0.5s ease, transform 0.5s ease;
    transform: translateY(10px);
    z-index: 0;
    display: flex !important;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 2rem;
    box-sizing: border-box;
}

body.presentation-mode section.active-slide {
    opacity: 1; visibility: visible;
    transform: translateY(0);
    z-index: 10;
}

/* --- Content Styling --- */
.slide-content {
    background: var(--bg-main);
    max-width: 1300px; 
    width: 95%;
    max-height: 88vh; /* Tighten height limit */
    padding: 1.2rem 2.5rem;
    border: 1px solid var(--border-light);
    border-radius: 8px;
    box-shadow: 0 10px 30px rgba(15, 23, 42, 0.05);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    overflow-y: auto; /* Allow internal scrolling for outliers */
    scrollbar-width: thin;
    scrollbar-color: #cbd5e1 transparent;
}

/* Custom scrollbar for Webkit */
.slide-content::-webkit-scrollbar { width: 6px; }
.slide-content::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }

.slide-content img {
    max-height: 35vh; /* Further limit image height */
    width: auto;
    object-fit: contain;
    flex-shrink: 1;
    margin: 0.5rem 0;
}

.video-container {
    width: 100%;
    max-width: 650px;
    aspect-ratio: 16 / 9;
    background: #000;
    margin: 0.8rem 0;
    flex-shrink: 1;
}

body.presentation-mode h2 {
    font-size: 2.2rem !important; /* Slightly smaller to save vertical space */
    font-family: var(--font-heading);
    font-weight: 700;
    margin-bottom: 1rem !important;
    color: var(--primary-blue);
    text-align: center;
    border-bottom: 4px solid var(--accent-cyan);
    padding-bottom: 0.4rem;
    display: inline-block;
    letter-spacing: -0.04em;
    flex-shrink: 0;
}

body.presentation-mode p, 
body.presentation-mode li {
    font-size: 1.35rem !important; /* Reduced for better fit */
    font-weight: 500;
    line-height: 1.4 !important;
    color: #1e293b;
    margin-bottom: 0.6rem;
    letter-spacing: -0.02em;
}

.molecule-container {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    padding: 1rem;
    background: #f8fafc;
    border-radius: 12px;
    border: 1px solid #e2e8f0;
    max-height: 30vh;
    flex-shrink: 1;
    overflow: hidden;
}

.molecule {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

.atom {
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 0.8rem;
    font-weight: bold;
    color: white;
    box-shadow: inset -2px -2px 5px rgba(0,0,0,0.2);
    position: relative;
    z-index: 2;
}

/* Specific Atoms */
.atom-h { width: 25px; height: 25px; font-size: 0.7rem; background: #3b82f6; border: 1px solid #1d4ed8;} /* 수소 (파랑) */
.atom-o { width: 35px; height: 35px; font-size: 0.8rem; background: #ef4444; border: 1px solid #b91c1c;} /* 산소 (빨강) */
.atom-n { width: 42px; height: 42px; background: #3b82f6; border: 1px solid #1d4ed8; } /* 질소 (파랑) */
.atom-c { width: 40px; height: 40px; background: #334155; border: 1px solid #0f172a; } /* 탄소 (검정) */
.atom-mg { width: 42px; height: 42px; background: #cbd5e1; border: 1px solid #94a3b8; } /* 마그네슘 (은색) */

/* Bonds */
.bond {
    position: absolute;
    background: #cbd5e1;
    z-index: 1;
}

/* Water Molecule (H2O) */
.mol-water { width: 70px; height: 60px; position: relative; }
.mol-water .atom-o { position: absolute; top: 0; left: 12.5px; }
.mol-water .atom-h:nth-child(2) { position: absolute; bottom: 0; left: 0; }
.mol-water .atom-h:nth-child(3) { position: absolute; bottom: 0; right: 0; }

/* Oxygen Molecule (O2) */
.mol-o2 { width: 85px; height: 45px; position: relative; }
.mol-o2 .atom-o:nth-child(1) { position: absolute; left: 0; }
.mol-o2 .atom-o:nth-child(2) { position: absolute; right: 0; }

/* Hydrogen Molecule (H2) */
.mol-h2 { width: 55px; height: 30px; position: relative; }
.mol-h2 .atom-h:nth-child(1) { position: absolute; left: 0; }
.mol-h2 .atom-h:nth-child(2) { position: absolute; right: 0; }

/* Nitrogen Molecule (N2) */
.mol-n2 { width: 80px; height: 42px; position: relative; }
.mol-n2 .atom-n:nth-child(1) { position: absolute; left: 0; }
.mol-n2 .atom-n:nth-child(2) { position: absolute; right: 0; }

/* Ammonia Molecule (NH3) */
.mol-nh3 { width: 80px; height: 70px; position: relative; }
.mol-nh3 .atom-n { position: absolute; top: 0; left: 19px; }
.mol-nh3 .atom-h:nth-child(2) { position: absolute; bottom: 0; left: 0; }
.mol-nh3 .atom-h:nth-child(3) { position: absolute; bottom: 0; left: 25px; }
.mol-nh3 .atom-h:nth-child(4) { position: absolute; bottom: 0; right: 0; }

/* --- Inorganic Prestige Accent --- */
:root {
    --prestige-navy: #0f172a;
    --prestige-gold: #a47764; /* Muted Bronze/Gold */
    --prestige-silver: #cbd5e1;
}

body.presentation-mode h2 {
    border-bottom: 4px solid var(--prestige-navy);
    text-transform: none; 
}

.math-font {
    font-family: 'Times New Roman', serif;
    font-style: italic;
    font-weight: bold;
    color: var(--prestige-navy);
}

.symmetry-box {
    border: 1px solid var(--prestige-silver);
    background: #ffffff;
    padding: 1.5rem;
    border-radius: 4px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.03);
}
.quiz-btn {
    padding: 1rem 2rem;
    font-size: 1.2rem;
    background: white;
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    width: 100%;
    text-align: left;
}
.quiz-btn:hover { background: #f0f9ff; border-color: var(--accent-cyan); }
.quiz-btn.correct { background: #ecfdf5; border-color: #10b981; color: #047857; }
.quiz-btn.wrong { background: #fef2f2; border-color: #ef4444; color: #b91c1c; }

/* --- Energy Change Styles --- */
.energy-box-exo {
    background: linear-gradient(135deg, #fff5f5 0%, #fed7d7 100%);
    border: 2px solid #f87171;
    color: #991b1b;
}
.energy-box-endo {
    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
    border: 2px solid #38bdf8;
    color: #075985;
}
.thermometer-container {
    width: 40px; height: 150px;
    background: #e2e8f0;
    border-radius: 20px;
    position: relative;
    overflow: hidden;
    border: 3px solid #475569;
}
.thermometer-mercury {
    position: absolute; bottom: 0; width: 100%;
    background: #ef4444;
    transition: height 1s ease-in-out;
}
.heat-wave {
    animation: wave 2s infinite;
}
@keyframes wave {
    0% { transform: scale(1); opacity: 0.8; }
    100% { transform: scale(1.5); opacity: 0; }
}

/* --- Readability Enhancements: Modern Light Theme --- */
.bg-slate-800, .bg-slate-900, .bg-slate-950 {
    background-color: #ffffff !important;
    color: #0f172a !important; /* Deep navy text */
    border: 3px solid #0f172a !important;
    box-shadow: 0 10px 25px rgba(15, 23, 42, 0.1) !important;
}

/* Specific text color fixes inside transformed dark-to-light boxes */
.bg-slate-800 p, .bg-slate-900 p, .bg-slate-950 p,
.bg-slate-800 li, .bg-slate-900 li, .bg-slate-950 li,
.bg-slate-800 span, .bg-slate-900 span, .bg-slate-950 span {
    color: #1e293b !important;
    font-weight: 600 !important;
}

/* Brighter highlights for light theme */
.bg-slate-800 .text-cyan-400, .bg-slate-900 .text-cyan-400 { color: #0891b2 !important; }
.bg-slate-800 .text-yellow-400, .bg-slate-900 .text-yellow-400 { color: #b45309 !important; }
.bg-slate-800 .text-orange-400, .bg-slate-900 .text-orange-400 { color: #ea580c !important; }
.bg-slate-800 .text-slate-400, .bg-slate-900 .text-slate-400 { color: #64748b !important; }
.bg-slate-800 .text-slate-300, .bg-slate-900 .text-slate-300 { color: #475569 !important; }

/* Table Header Refinement */
.bg-slate-900.text-white, thead.bg-slate-900 {
    background-color: #1e293b !important;
    color: #ffffff !important;
}
thead.bg-slate-900 th { color: #ffffff !important; }

/* --- Slide Controls --- */
#slide-controls {
    position: fixed; bottom: 20px; right: 20px;
    background: white; padding: 10px 20px;
    border-radius: 30px; border: 1px solid #e2e8f0;
    display: flex; gap: 15px; z-index: 100;
    align-items: center;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}
#home-btn {
    text-decoration: none;
    color: var(--primary-blue);
    font-weight: bold;
    font-size: 0.9rem;
    padding: 5px 12px;
    border-radius: 20px;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 5px;
}
#home-btn:hover { background: #f1f5f9; color: var(--accent-cyan); }
.control-sep { width: 1px; height: 20px; background: #e2e8f0; }
#slide-indicator { font-family: 'GmarketSansBold', sans-serif; font-size: 0.9rem; color: #64748b; min-width: 60px; text-align: center; }
#prev-btn, #next-btn {
    background: none; border: none; cursor: pointer;
    font-size: 1.2rem; color: var(--primary-blue);
    transition: transform 0.1s;
}
#prev-btn:hover, #next-btn:hover { color: var(--accent-cyan); transform: scale(1.2); }

/* --- Molecular Animations --- */
@keyframes vibrate {
    0% { transform: translate(0, 0) rotate(0deg); }
    25% { transform: translate(1px, 1px) rotate(0.5deg); }
    50% { transform: translate(-1px, -1px) rotate(-0.5deg); }
    75% { transform: translate(1px, -1px) rotate(0.5deg); }
    100% { transform: translate(0, 0) rotate(0deg); }
}

@keyframes erratic-fly {
    0% { transform: translate(0, 0); }
    25% { transform: translate(40px, -30px); }
    50% { transform: translate(-20px, 50px); }
    75% { transform: translate(-50px, -20px); }
    100% { transform: translate(0, 0); }
}

@keyframes blink-red {
    0%, 100% { color: #94a3b8; opacity: 0.3; }
    50% { color: #ef4444; opacity: 1; transform: scale(1.2); }
}

.animate-vibrate { animation: vibrate 0.15s infinite linear; }
.animate-fly-erratic { animation: erratic-fly 4s infinite ease-in-out; }
.animate-heating { animation: blink-red 1s infinite; }

/* Granular Chemical Reaction (Slide 15) - Reality Refined */
@keyframes atom-h1 { 
    0%, 20% { transform: translate(-230px, -80px); } /* H2-1 left */
    35%, 45% { transform: translate(-100px, -40px) rotate(10deg); } /* Broken */
    65%, 100% { transform: translate(-175px, 25px); } /* H2O-1 Bottom Left */
}
@keyframes atom-h2 { 
    0%, 20% { transform: translate(-195px, -80px); } /* H2-1 right */
    35%, 45% { transform: translate(-40px, -90px) rotate(-15deg); } /* Broken */
    65%, 100% { transform: translate(-125px, 25px); } /* H2O-1 Bottom Right */
}
@keyframes atom-h3 { 
    0%, 20% { transform: translate(-230px, 80px); } /* H2-2 left */
    35%, 45% { transform: translate(40px, 90px) rotate(20deg); } /* Broken */
    65%, 100% { transform: translate(125px, 25px); } /* H2O-2 Bottom Left */
}
@keyframes atom-h4 { 
    0%, 20% { transform: translate(-195px, 80px); } /* H2-2 right */
    35%, 45% { transform: translate(100px, 40px) rotate(-10deg); } /* Broken */
    65%, 100% { transform: translate(175px, 25px); } /* H2O-2 Bottom Right */
}
@keyframes atom-o1 { 
    0%, 20% { transform: translate(190px, -23px); } /* O2 Top */
    35%, 45% { transform: translate(-20px, 20px) scale(1.1); } /* Broken center-left */
    65%, 100% { transform: translate(-150px, -10px); } /* H2O-1 Center O */
}
@keyframes atom-o2 { 
    0%, 20% { transform: translate(190px, 23px); } /* O2 Bottom */
    35%, 45% { transform: translate(20px, -20px) scale(1.1); } /* Broken center-right */
    65%, 100% { transform: translate(150px, -10px); } /* H2O-2 Center O */
}

@keyframes label-reactants { 0%, 45% { opacity: 1; } 55%, 100% { opacity: 0; } }
@keyframes label-products { 0%, 45% { opacity: 0; } 55%, 100% { opacity: 1; } }

.reaction-stage {
    position: relative;
    width: 800px;
    height: 350px;
    background: #fff;
    border-radius: 24px;
    overflow: hidden;
    border: 2px solid #fee2e2;
    display: flex;
    justify-content: center;
    align-items: center;
}

